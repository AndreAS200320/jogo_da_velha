<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo da Velha</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <style>
        .celula{
            border: solid 1px black;
            text-align: center;
            font-size: 80px;
        }

        span{
            opacity: 0;
        }

        .text-center{
            align-items: center;
        }
    </style>

</head>
<body>

    <div class="container-fluid espaçamento">

        <div class="row">
            <h2 class="text-center">Vez do Jogador <strong id="tituloJogador">X</strong></h2>
            <h1 id="quem-ganhou" class="text-center"></h1>
        </div>

        <div class="row">
            <div class="col-4 celula" >
                <span onclick="trocaValor(this,0,0)">+</span>
            </div>
            <div class="col-4 celula">
                <span onclick="trocaValor(this,0,1)">+</span>
            </div>
            <div class="col-4 celula">
                <span onclick="trocaValor(this,0,2)">+</span>
            </div>
        </div> <!-- fim da div row-->

        <div class="row">
            <div class="col-4 celula">
                <span onclick="trocaValor(this,1,0)">+</span>
            </div>
            <div class="col-4 celula">
                <span onclick="trocaValor(this,1,1)">+</span>
            </div>
            <div class="col-4 celula">
                <span onclick="trocaValor(this,1,2)">+</span>
            </div>
        </div> <!-- fim da div row-->

        <div class="row">
            <div class="col-4 celula">
                <span onclick="trocaValor(this,2,0)">+</span>
            </div>
            <div class="col-4 celula">
                <span onclick="trocaValor(this,2,1)">+</span>
            </div>
            <div class="col-4 celula">
                <span onclick="trocaValor(this,2,2)">+</span>
            </div>
        </div> <!-- fim da div row-->

        
    </div><!-- fim da container-fluid -->

    <script>
        var matrizJogo = [
            ["", "", ""],
            [ "", "",""],
            [ "", "",""]
        ];

        let varJogador = 0;

        function color() {
            let num = Math.floor(255 * Math.random() + 1)

            return num
        }

        setInterval(() => {

            const celula = document.getElementsByClassName('celula')
            
            for(x = 0; x < celula.length; x ++){ 
                  
                celula[x].style.backgroundColor = `rgb(${color()}, ${color()}, ${color()})`

            }
        }, 1000);

        function trocaValor(span, linha, coluna){

            span.style.opacity = "1";

            if(varJogador % 2 == 1){

                if(span.innerHTML != 'O' && span.innerHTML != 'X'){

                    matrizJogo[linha][coluna] = "O"

                    span.innerHTML = 'O'

                    varJogador += 1;

                    document.getElementById('tituloJogador').innerHTML = 'X';

                }

                
            }else{

                if(span.innerHTML != 'O' && span.innerHTML != 'X'){

                    matrizJogo[linha][coluna] = "X"

                    span.innerHTML = 'X'

                    varJogador += 1;                    
  
                    document.getElementById('tituloJogador').innerHTML = 'O';

                }
  
            }

            if(matrizJogo[linha][0] == matrizJogo[linha][1] && matrizJogo[linha][0] == matrizJogo[linha][2]){
                document.getElementById('quem-ganhou').innerHTML = `O jogador ${matrizJogo[linha][coluna]} ganhou!!`
            }
            if(matrizJogo[0][coluna] == matrizJogo[2][coluna] && matrizJogo[0][coluna] == matrizJogo[1][coluna]){
                document.getElementById('quem-ganhou').innerHTML = `O jogador ${matrizJogo[linha][coluna]} ganhou!!` 
            }
            if((matrizJogo[0][0] == matrizJogo[1][1] && matrizJogo[1][1] == matrizJogo[2][2] && matrizJogo[1][1] != "") || (matrizJogo[0][2] == matrizJogo[1][1] && matrizJogo[1][1] == matrizJogo[2][0] && matrizJogo[1][1] != "")){
                document.getElementById('quem-ganhou').innerHTML = `O jogador ${matrizJogo[1][1]} ganhou!!` 
            }

            //color

            //setInterval()

        } //Final função troca valor

        

        // function ajusteMatriz(){
        //     console.log(click)
        // }

        // const casaSpan = document.getElementsByClassName('celula');
        
        // casaSpan.addEventListener('clcik', ajusteMatriz)
    </script>

</body>
</html>